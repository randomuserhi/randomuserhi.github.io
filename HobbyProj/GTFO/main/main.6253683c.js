let mount;RHU.import(RHU.module({trace:new Error,name:"Report",hard:["RHU.Macro","RHU.Rest"],callback:function(){let{RHU:e}=window.RHU.require(window,this),t=function(){};t.prototype.load=function(t){let n=mount.report,i=n.spec,l=n.players.get(t);e.exists(l.packs.Health)&&(this.med.innerHTML=`${l.packs.Health.length}`),e.exists(l.packs.Ammo)&&(this.ammo.innerHTML=`${l.packs.Ammo.length}`),e.exists(l.packs.Tool)&&(this.tool.innerHTML=`${l.packs.Tool.length}`),e.exists(l.packs.Disinfect)&&(this.disinfect.innerHTML=`${l.packs.Disinfect.length}`);let a=0,s={};for(let t of l.dodges){let r=n.enemies.get(t.enemyInstanceID);e.exists(r)?(r.type in s?s[r.type]+=1:s[r.type]=1,a+=i.enemies[r.type].dodgeValue/l.healthMax*100):console.warn(`Enemy, ${t.enemyInstanceID}, does not exist.`)}this.damageAvoided.innerHTML=`${Math.round(a)}`;let r=new DocumentFragment;{let e=document.createElement("tr"),t=document.createElement("td");t.style.paddingBottom="0.5rem";let n=document.createElement("td");n.style.paddingBottom="0.5rem";let i=document.createElement("td");i.style.paddingBottom="0.5rem",t.innerHTML="<u>Type</u>",n.style.paddingLeft="2rem",n.innerHTML="<u>Occurence</u>",i.style.paddingLeft="2rem",i.innerHTML="<u>Avoided</u>",e.append(t,n,i),r.append(e)}for(let e in s){let t=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("td"),o=document.createElement("td");n.innerHTML=`${e}`,a.style.paddingLeft="2rem",a.innerHTML=`${s[e]}`,o.style.paddingLeft="2rem",o.style.color="#e9bc29",o.innerHTML=`${Math.round(s[e]*i.enemies[e].dodgeValue/l.healthMax*100)}`,t.append(n,a,o),r.append(t)}this.dodgetable.replaceChildren(r),this.timeline.load(l,n),a>0&&(this.dodgetable.style.display="block")},e.Macro(t,"playerSummary",'\n            <div style="margin-bottom: 2rem;">\n                <rhu-macro rhu-id="timeline" rhu-type="graph"></rhu-macro>\n            </div>\n            <div class="margins">\n                <div class="margins-wrapper">\n                    <h2 style="display: flex; gap: 3rem; align-items: center; margin-bottom: 1rem;">\n                        <span>Resources</span>\n                    </h2>\n                    <div style="margin-bottom: 2rem;">\n                        <ul style="display: flex; gap: 2.5rem;">\n                            <li style="display: flex; gap: 1rem; align-items: center;">\n                                <img style="width: 4rem;" src="./icons/packs/Health.webp"/>\n                                <span rhu-id="med">0</span>\n                            </li>\n                            <li style="display: flex; gap: 1rem; align-items: center;">\n                                <img style="width: 4rem;" src="./icons/packs/Ammo.webp"/>\n                                <span rhu-id="ammo">0</span>\n                            </li>\n                            <li style="display: flex; gap: 1rem; align-items: center;">\n                                <img style="width: 4rem;" src="./icons/packs/Tool.webp"/>\n                                <span rhu-id="tool">0</span>\n                            </li>\n                            <li style="display: flex; gap: 1rem; align-items: center;">\n                                <img style="width: 4rem;" src="./icons/packs/Disinfect.webp"/>\n                                <span rhu-id="disinfect">0</span>\n                            </li>\n                        </ul>\n                    </div>\n                    <h2 style="display: flex; gap: 3rem; align-items: center; margin-bottom: 1rem;">\n                        <span>Dodges</span>\n                    </h2>\n                    <div style="display: flex;">\n                        <div style="flex: 0.7; padding-right: 1.5rem;">\n                            <div style="margin-bottom: 1rem">\n                                <ul style="display: flex; gap: 2.5rem;">\n                                    <li style="flex: 1; display: flex; gap: 1rem;">\n                                        Damage Avoided <span style="color: #e9bc29;" rhu-id="damageAvoided">0</span>\n                                    </li>\n                                </ul>\n                            </div>\n                            <table rhu-id="dodgetable" style="display: none;">\n                            </table>\n                        </div>\n                        <div style="flex: 1; padding-left: 2rem;">\n                            \x3c!-- TODO --\x3e\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ',{element:"<div></div>"});let n=function(){};n.prototype.load=function(t,n){let i=mount.report,l=i.players.get(t),a=l.gears[n];this.name.innerHTML=n,this.img.src=`./icons/gear/${n}.webp`;let s=i.getPlayerGearKills(t,n),r=0,o=new DocumentFragment;{let e=document.createElement("tr"),t=document.createElement("td");t.style.paddingBottom="0.5rem";let n=document.createElement("td");n.style.paddingBottom="0.5rem",t.innerHTML="<u>Type</u>",n.style.paddingLeft="2rem",n.innerHTML="<u>Kills</u>",e.append(t,n),o.append(e)}for(let e in s){r+=s[e];let t=document.createElement("tr"),n=document.createElement("td"),i=document.createElement("td");n.innerHTML=e,i.style.paddingLeft="2rem",i.innerHTML=s[e].toString(),t.append(n,i),o.append(t)}if(this.killtable.replaceChildren(o),e.exists(a.mines)){let e=document.createElement("ul"),t=[];for(let e in a.mines)t.push(a.mines[e]);t.sort(((e,t)=>t.timestamp-e.timestamp));for(let n of t){let t=document.createElement("li");t.style.marginTop="1rem",t.style.display="flex",t.style.gap="2rem";let l=document.createElement("div"),s=document.createElement("img");s.style.width="2rem","Krieger O4"!==a.name?s.src="./icons/consumables/mine.webp":s.src="./icons/consumables/mine.png",l.append(s),t.append(l);let r=document.createElement("table"),o={};for(let e of n.enemies.values()){let t=i.enemies.get(e);t.type in o?o[t.type]+=1:o[t.type]=1}let d=new DocumentFragment;{let e=document.createElement("tr"),t=document.createElement("td");t.style.paddingBottom="0.5rem";let n=document.createElement("td");n.style.paddingBottom="0.5rem",t.innerHTML="<u>Type</u>",n.style.paddingLeft="2rem",n.innerHTML="<u>Kills</u>",e.append(t,n),d.append(e)}for(let e in o){let t=document.createElement("tr"),n=document.createElement("td"),i=document.createElement("td");n.innerHTML=e,i.style.paddingLeft="2rem",i.innerHTML=o[e].toString(),t.append(n,i),d.append(t)}r.replaceChildren(d),t.append(r),e.append(t)}this.instances.replaceChildren(),this.instances.append(e),t.length>0&&(this.instances.style.display="block")}this.damage.innerHTML=`${a.damage.toFixed(2)}`,this.kills.innerHTML=`${r}`,this.assists.innerHTML=`${[...a.enemies.values()].filter((t=>{let n=i.enemies.get(t);return e.exists(n)&&!n.alive&&e.exists(n.killer)&&n.killer!==l.playerID})).length}`,r>0&&(this.body.style.display="block")},e.Macro(n,"gearRecap",'\n            <div class="margins">\n                <div class="margins-wrapper">\n                    <h2 style="display: flex; gap: 3rem; align-items: center; margin-bottom: 1rem;">\n                        <img rhu-id="img" style="height: 4rem;" src=""/>\n                        <span rhu-id="name">UNKNOWN</span>\n                    </h2>\n                    <div style="display: flex;">\n                        <div style="padding-right: 1.5rem;">\n                            <div style="margin-bottom: 1rem">\n                                <ul style="display: flex; gap: 2.5rem;">\n                                    <li style="display: flex; gap: 1rem;">\n                                        Damage <span style="color: #e9bc29;" rhu-id="damage">0</span>\n                                    </li>\n                                    <li style="display: flex; gap: 1rem;">\n                                        Kills <span rhu-id="kills">0</span>\n                                    </li>\n                                    <li style="display: flex; gap: 1rem;">\n                                        Assists <span rhu-id="assists">0</span>\n                                    </li>\n                                </ul>\n                            </div>\n                            <div rhu-id="body" style="display: none;">\n                                <table rhu-id="killtable">\n                                </table>\n                                <div rhu-id="instances">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ',{element:"<li></li>"});let i=function(){};i.prototype.load=function(t){let n=mount.report,i=n.allPlayers.get(t);if(!e.exists(i))return;this.name.innerHTML=i.name,this.body.style.display="block",this.summary.load(i.playerID);let l=n.getLoadout(i.playerID);if(e.exists(l.main)){let e=document.createMacro("gearRecap");this.gears.append(e),e.load(i.playerID,l.main.publicName)}if(e.exists(l.secondary)){let e=document.createMacro("gearRecap");this.gears.append(e),e.load(i.playerID,l.secondary.publicName)}if(e.exists(l.tool)){let e=document.createMacro("gearRecap");this.gears.append(e),e.load(i.playerID,l.tool.publicName)}if(e.exists(l.melee)){let e=document.createMacro("gearRecap");this.gears.append(e),e.load(i.playerID,l.melee.publicName)}},e.Macro(i,"playerInfoFull",'\n            <div class="margins">\n                <div class="margins-wrapper">\n                    <h1 rhu-id="name" style="padding-top: 2rem; font-family: Share Tech Mono; font-weight: 800;">DISCONNECTED</h1>\n                </div>\n            </div>\n            <div rhu-id="body" style="display: none;">\n                <rhu-macro rhu-id="summary" rhu-type="playerSummary">\n                    \x3c!-- player summary --\x3e\n                    \x3c!-- key achievements --\x3e\n                </rhu-macro>\n                <ul rhu-id="gears" style="display: flex; flex-direction: column; gap: 1rem; margin-top: 2rem;">\n                    \x3c!-- gear recap --\x3e\n                </ul>\n                <div style="margin-top: 2rem;">\n                    \x3c!-- TODO(randomuserhi) --\x3e\n                    \x3c!-- damage taken timeline --\x3e\n                    \x3c!-- health timeline --\x3e\n                    \x3c!-- packs timeline --\x3e\n                </div>\n                <div style="margin-top: 2rem;">\n                    \x3c!-- TODO(randomuserhi) --\x3e\n                    \x3c!-- all achievements --\x3e\n                </div>\n            </div>\n            ',{element:"<div></div>"});let l=function(){this.loaded=!1;const e=this;this.full=document.createMacro("playerInfoFull"),this.addEventListener("click",(function(){e.panel.footer.replaceChildren(e.full),e.panel.resize(),e.full.scrollIntoView({behavior:"smooth"}),requestAnimationFrame((()=>{e.full.summary.timeline.render()}))}))};l.prototype.load=function(t){if(this.loaded)return;this.loaded=!0,this.disconnected.style.display="none",this.body.style.display="block",this.name.innerHTML=t.name;let n=mount.report,i=n.getLoadout(t.playerID);e.exists(i.main)&&(this.main.innerHTML=i.main.publicName,this.mainImg.src=`./icons/gear/${i.main.publicName}.webp`),e.exists(i.secondary)&&(this.secondary.innerHTML=i.secondary.publicName,this.secondaryImg.src=`./icons/gear/${i.secondary.publicName}.webp`),e.exists(i.tool)&&(this.tool.innerHTML=i.tool.publicName,this.toolImg.src=`./icons/gear/${i.tool.publicName}.webp`),e.exists(i.melee)&&(this.melee.innerHTML=i.melee.publicName,this.meleeImg.src=`./icons/gear/${i.melee.publicName}.webp`);let l=n.getAchievements(t.playerID);for(let t=0;t<l.length&&t<4;++t){let n=document.createElement("li"),i=document.createElement("img");i.src=`./icons/achievements/${l[t].type}.png`,i.style.width="5rem",i.style.padding="0.5rem",n.append(i),n.addEventListener("mouseover",(()=>{e.exists(achievements[l[t].type])?(this.achievementName.innerHTML=achievements[l[t].type].name,this.achievementAlt.innerHTML=achievements[l[t].type].alt,this.achievementAlt.append(e.Macro.parseDomString(`<div style="font-family: 'Share Tech Mono'; text-align: center;">${l[t].text}</div>`))):(this.achievementName.innerHTML="Unknown",this.achievementAlt.innerHTML="Unknown")})),this.achievements.append(n)}this.full.load(t.playerID)},e.Macro(l,"playerInfo",'\n            <div style="display: block; padding: 1rem; color: #e11900" rhu-id="disconnected">\n                DISCONNECTED\n            </div>\n            <div style="display: none;" rhu-id="body">\n                <ul rhu-id="slotList" class="player-info-loadout" style="display: flex; flex-direction: column;">\n                    <li style="padding: 0;">\n                        <button rhu-id="name" style="width: 100%; --color: #dadad1;"></button>\n                    </li>\n                    <li style="position: relative;">\n                        <ul class="achievement" rhu-id="achievements" style="display: flex; padding-top: 0.5rem;">\n                        </ul>\n                        <div class="achievements">\n                            <h3 rhu-id="achievementName" style="\n                                font-family: \'Share Tech Mono\';\n                                margin-bottom: 0.4rem;\n                            "></h3>\n                            <span rhu-id="achievementAlt" style="font-family: \'Share Tech Mono\'; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 0.5rem;"></span>\n                        </div>\n                    </li>\n                    <li>\n                        <div rhu-id="main"></div>\n                        <div style="flex:1"></div>\n                        <img rhu-id="mainImg"src=""/>\n                    </li>\n                    <li>\n                        <div rhu-id="secondary"></div>\n                        <div style="flex:1"></div>\n                        <img rhu-id="secondaryImg"src=""/>\n                    </li>\n                    <li>\n                        <div rhu-id="tool"></div>\n                        <div style="flex:1"></div>\n                        <img rhu-id="toolImg"src=""/>\n                    </li>\n                    <li>\n                        <div rhu-id="melee"></div>\n                        <div style="flex:1"></div>\n                        <img rhu-id="meleeImg" src=""/>\n                    </li>\n                </ul>\n            </div>\n            ',{element:'<div class="player-info"></div>'});e.Macro((function(){}),"playerPanelFooter","\n            \n            ",{element:'<div style="width: 100%; flex: 1; background-color: black; padding: 4rem; padding-top: 14rem;"></div>'});let a=function(){const e=this;this.footer=document.createMacro("playerPanelFooter"),this.footer.panel=this,this.slots=[this.slot0,this.slot1,this.slot2,this.slot3];for(let e of this.slots)e.panel=this;this.resize=function(){let t=getComputedStyle(e.slot0),n=getComputedStyle(e.slot0.slotList);e.footer.style.paddingTop=`calc(${parseInt(n.height)-parseInt(t.height)}px + 4rem)`},window.addEventListener("resize",this.resize)};a.prototype.reset=function(){if(this.vid.play(),mount.body.append(this.footer),!e.exists(mount.report))return;let t=0;for(let e of mount.report.players.values())this.slots[t++].load(e)},e.Macro(a,"playerPanel",'\n            <div style="position: relative; width: 100%; aspect-ratio: 2.25;/*max-height: 400px;*/">\n                <video rhu-id="vid" class="player-video" autoplay loop playsinline disablepictureinpicture poster="https://storage.googleapis.com/gtfo-prod-v1/lobby_test_2_00000_a4b0da3c99/lobby_test_2_00000_a4b0da3c99.jpg">\n                    <source src="https://storage.googleapis.com/gtfo-prod-v1/lobby_FIX_8cbec4587d/lobby_FIX_8cbec4587d.mp4" type="video/mp4">\n                </video>\n                <div style="position: relative; height: 100%; aspect-ratio: 2.25; margin: auto;">\n                    <rhu-macro rhu-id="slot0" style="top: 40%; left: 15%;" rhu-type="playerInfo"></rhu-macro>\n                    <rhu-macro rhu-id="slot1" style="top: 40%; left: 37%;" rhu-type="playerInfo"></rhu-macro>\n                    <rhu-macro rhu-id="slot2" style="top: 40%; left: 59%;" rhu-type="playerInfo"></rhu-macro>\n                    <rhu-macro rhu-id="slot3"style="top: 40%; left: 80%;" rhu-type="playerInfo"></rhu-macro>\n                </div>\n            </div>\n            ',{element:'<div style="display: flex; flex-direction: column; height: 100%; width: 100%; position: relative;" class=""></div>'});let s=function(){};s.prototype.reset=function(){e.exists(mount.report)&&this.list.load(mount.report)},e.Macro(s,"enemyPanel",'\n            <div class="margins-wrapper">\n                <rhu-macro rhu-id="list" rhu-type="enemyList"></rhu-macro>\n            </div>\n            ',{element:'<div class="margins"></div>'});let r=function(){mount=this;const e=this;this.view="players",this.report=null,this.navbar=[{btn:this.playersBtn,panel:document.createMacro("playerPanel")},{btn:this.enemiesBtn,panel:document.createMacro("enemyPanel")}];let t=this.navbar;for(let{btn:n,panel:i}of t)n.onclick=function(){for(let{btn:e}of t)e.classList.toggle("selected",!1);n.classList.toggle("selected",!0),e.body.replaceChildren(i),requestAnimationFrame((()=>{i.reset()}))};t[0].btn.click()};r.prototype.open=function(e){this.report=e},e.Macro(r,"report",'\n            \x3c!-- navbar --\x3e\n            <ul class="report-navbar">\n                <li class="selected" rhu-id="playersBtn">\n                    <a>Players</a>\n                </li>\n                <li rhu-id="enemiesBtn">\n                    <a>Enemies</a>\n                </li>\n            </ul>\n            <div class="report-body" rhu-id="body">\n            </div>\n            ',{element:'<div class="report-mount"></div>'})}}));
//# sourceMappingURL=main.6253683c.js.map
